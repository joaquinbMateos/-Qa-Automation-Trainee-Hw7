{"failedCount":1,"prefixedPath":"classpath:homework07\/postRequest.feature","packageQualifiedName":"homework07.postRequest","loopIndex":-1,"relativePath":"homework07\/postRequest.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":1175800,"millis":1.1758,"status":"passed"},"step":{"background":true,"line":4,"prefix":"Given","index":0,"text":"url 'https:\/\/automationintesting.online'"},"stepLog":"14:54:00.476 karate.env system property was: null \n"},{"result":{"nanos":521605700,"millis":521.6057,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"configure ssl = true"}},{"result":{"nanos":2147058800,"millis":2147.0588,"status":"passed"},"step":{"line":8,"prefix":"*","index":0,"text":"def getRoom = call read(\"getRequest.feature\")"},"callResults":[{"failedCount":0,"prefixedPath":"classpath:homework07\/getRequest.feature","packageQualifiedName":"homework07.getRequest","loopIndex":-1,"relativePath":"homework07\/getRequest.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":332900,"millis":0.3329,"status":"passed"},"step":{"background":true,"line":4,"prefix":"Given","index":0,"text":"url 'https:\/\/automationintesting.online'"}},{"result":{"nanos":482500,"millis":0.4825,"status":"passed"},"step":{"line":7,"prefix":"Given","index":0,"text":"path '\/room\/'"}},{"result":{"nanos":410400,"millis":0.4104,"status":"passed"},"step":{"line":8,"prefix":"And","index":1,"text":"header Accept = 'application\/json'"}},{"result":{"nanos":2086392800,"millis":2086.3928,"status":"passed"},"step":{"line":9,"prefix":"When","index":2,"text":"method get"},"stepLog":"14:54:01.350 request:\n1 > GET https:\/\/automationintesting.online\/room\n1 > Accept: application\/json\n1 > Host: automationintesting.online\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/11.0.2)\n1 > Accept-Encoding: gzip,deflate\n\n\n14:54:02.516 request:\n2 > GET https:\/\/automationintesting.online\/room\n2 > Accept: application\/json\n2 > Host: automationintesting.online\n2 > Connection: Keep-Alive\n2 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/11.0.2)\n2 > Accept-Encoding: gzip,deflate\n\n\n14:54:02.848 request:\n3 > GET https:\/\/automationintesting.online\/room\n3 > Accept: application\/json\n3 > Host: automationintesting.online\n3 > Connection: Keep-Alive\n3 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/11.0.2)\n3 > Accept-Encoding: gzip,deflate\n\n\n14:54:03.143 response time in milliseconds: 271\n3 < 200\n3 < Date: Sat, 15 Oct 2022 17:54:05 GMT\n3 < Content-Type: application\/json\n3 < Transfer-Encoding: chunked\n3 < Connection: keep-alive\n3 < CF-Cache-Status: DYNAMIC\n3 < Report-To: {\"endpoints\":[{\"url\":\"https:\\\/\\\/a.nel.cloudflare.com\\\/report\\\/v3?s=eoCchi2y3t1JFBNnAiTmF0kNHwXOUUVnaloB3Nm37JzhdDL2VfdZCnQEYxBUDLtI4371WRG4s%2BTg5XRDEWqsBHkHRMgNpsMvMr126dKht4EfbqI7WqMCdhk4ofSnl9tw9ys0%2FDBwQBjn7VCBRQ%3D%3D\"}],\"group\":\"cf-nel\",\"max_age\":604800}\n3 < NEL: {\"success_fraction\":0,\"report_to\":\"cf-nel\",\"max_age\":604800}\n3 < Server: cloudflare\n3 < CF-RAY: 75aa6afdee3b02ba-MIA\n3 < alt-svc: h3=\":443\"; ma=86400, h3-29=\":443\"; ma=86400\n{\"rooms\":[{\"roomid\":1,\"roomName\":\"101\",\"type\":\"single\",\"accessible\":true,\"image\":\"https:\/\/www.mwtestconsultancy.co.uk\/img\/testim\/room2.jpg\",\"description\":\"Aenean porttitor mauris sit amet lacinia molestie. In posuere accumsan aliquet. Maecenas sit amet nisl massa. Interdum et malesuada fames ac ante.\",\"features\":[\"TV\",\"WiFi\",\"Safe\"],\"roomPrice\":100}]}\n\n"},{"result":{"nanos":23400,"millis":0.0234,"status":"passed"},"step":{"line":10,"prefix":"Then","index":3,"text":"status 200"}},{"result":{"nanos":6665600,"millis":6.6656,"status":"passed"},"step":{"line":11,"prefix":"And","index":4,"text":"print response"},"stepLog":"14:54:03.216 [print] {\n  \"rooms\": [\n    {\n      \"roomid\": 1,\n      \"roomName\": \"101\",\n      \"type\": \"single\",\n      \"accessible\": true,\n      \"image\": \"https:\/\/www.mwtestconsultancy.co.uk\/img\/testim\/room2.jpg\",\n      \"description\": \"Aenean porttitor mauris sit amet lacinia molestie. In posuere accumsan aliquet. Maecenas sit amet nisl massa. Interdum et malesuada fames ac ante.\",\n      \"features\": [\n        \"TV\",\n        \"WiFi\",\n        \"Safe\"\n      ],\n      \"roomPrice\": 100\n    }\n  ]\n}\n \n"},{"result":{"nanos":5011200,"millis":5.0112,"status":"passed"},"step":{"line":12,"prefix":"*","index":5,"text":"def roomid = response['rooms'][0]['roomid']"}},{"result":{"nanos":4148900,"millis":4.1489,"status":"passed"},"step":{"line":13,"prefix":"And","index":6,"text":"print roomid"},"stepLog":"14:54:03.225 [print] 1 \n"}],"executorName":"main","line":6,"name":"getting rooms from API in JSON format.","description":"","durationMillis":2103.4677,"startTime":1665856441121,"failed":false,"refId":"[1:6]","endTime":1665856443226,"exampleIndex":-1}],"callDepth":1,"name":"get request from room endpoint","description":"","resultDate":"2022-10-15 02:54:05 p. m.","durationMillis":2103.4677,"passedCount":1}]},{"result":{"nanos":1219100,"millis":1.2191,"status":"passed"},"step":{"line":9,"prefix":"*","index":1,"text":"def room = getRoom.roomid"}},{"result":{"nanos":383900,"millis":0.3839,"status":"passed"},"step":{"line":11,"prefix":"Given","index":2,"text":"path '\/auth\/login\/'"}},{"result":{"nanos":49860100,"millis":49.8601,"status":"passed"},"step":{"line":12,"prefix":"And","index":3,"text":"request {\"username\": \"admin\",\"password\": \"password\" }"}},{"result":{"nanos":953128400,"millis":953.1284,"status":"passed"},"step":{"line":13,"prefix":"When","index":4,"text":"method post"},"stepLog":"14:54:03.498 request:\n4 > POST https:\/\/automationintesting.online\/auth\/login\n4 > Content-Type: application\/json; charset=UTF-8\n4 > Content-Length: 42\n4 > Host: automationintesting.online\n4 > Connection: Keep-Alive\n4 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/11.0.2)\n4 > Accept-Encoding: gzip,deflate\n{\"username\":\"admin\",\"password\":\"password\"}\n\n14:54:04.208 response time in milliseconds: 688\n4 < 200\n4 < Date: Sat, 15 Oct 2022 17:54:06 GMT\n4 < Content-Length: 0\n4 < Connection: keep-alive\n4 < CF-Cache-Status: DYNAMIC\n4 < Report-To: {\"endpoints\":[{\"url\":\"https:\\\/\\\/a.nel.cloudflare.com\\\/report\\\/v3?s=AWhob7KRVIOlHrDOVOSV%2FQNPWvv74qGFi5Zn9dPmEwhJbtQI47BnP0YBiuwbNjf2bTQXkgTc9skO2MA1lSecgOafxOo1Jkzvk55TZGaavCLefo%2BEBRfP%2FUQDqZ0NylqQFtdtWhF990gpUswnIw%3D%3D\"}],\"group\":\"cf-nel\",\"max_age\":604800}\n4 < NEL: {\"success_fraction\":0,\"report_to\":\"cf-nel\",\"max_age\":604800}\n4 < Server: cloudflare\n4 < CF-RAY: 75aa6b03dc9d67ce-MIA\n4 < alt-svc: h3=\":443\"; ma=86400, h3-29=\":443\"; ma=86400\n4 < Set-Cookie: token=9Gy1kJmecG0QQVkb; Domain=automationintesting.online\n\n\n"},{"result":{"nanos":22000,"millis":0.022,"status":"passed"},"step":{"line":14,"prefix":"Then","index":5,"text":"status 200"}},{"result":{"nanos":2574700,"millis":2.5747,"status":"passed"},"step":{"line":15,"prefix":"*","index":6,"text":"def token = responseHeaders['Set-Cookie']"}},{"result":{"nanos":2196300,"millis":2.1963,"status":"passed"},"step":{"line":16,"prefix":"And","index":7,"text":"print token"},"stepLog":"14:54:04.243 [print] [\n  \"token=9Gy1kJmecG0QQVkb; Domain=automationintesting.online\"\n]\n \n"},{"result":{"nanos":701700,"millis":0.7017,"status":"passed"},"step":{"comments":["#Scenario: getting rooms from API in JSON format.","#* def body = read(\"booking.json\")","#* def getToken = call read(\"getToken.feature\")","#* def token = getToken.token"],"line":23,"prefix":"Given","index":8,"text":"path \"\/booking\/\""}},{"result":{"nanos":711300,"millis":0.7113,"status":"passed"},"step":{"line":24,"prefix":"And","index":9,"text":"cookie authToken = token"}},{"result":{"nanos":1960900,"millis":1.9609,"status":"passed"},"step":{"line":25,"prefix":"And","index":10,"text":"request {\"bookingdates\": {\"checkin\": \"2022-10-27\",\"checkout\": \"2022-10-28\"} ,\"depositpaid\": true,\"firstname\": \"joaquin\",\"lastname\": \"mateos\",\"roomid\": \"#(room)\",\"totalprice\":0}"}},{"result":{"nanos":1290792300,"millis":1290.7923,"status":"passed"},"step":{"line":26,"prefix":"When","index":11,"text":"method post"},"stepLog":"14:54:04.252 request:\n5 > POST https:\/\/automationintesting.online\/booking\n5 > Cookie: token=9Gy1kJmecG0QQVkb\n5 > Content-Type: application\/json; charset=UTF-8\n5 > Content-Length: 152\n5 > Host: automationintesting.online\n5 > Connection: Keep-Alive\n5 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/11.0.2)\n5 > Accept-Encoding: gzip,deflate\n{\"bookingdates\":{\"checkin\":\"2022-10-27\",\"checkout\":\"2022-10-28\"},\"depositpaid\":true,\"firstname\":\"joaquin\",\"lastname\":\"mateos\",\"roomid\":1,\"totalprice\":0}\n\n14:54:04.947 request:\n6 > POST https:\/\/automationintesting.online\/booking\n6 > Cookie: token=9Gy1kJmecG0QQVkb\n6 > Content-Type: application\/json; charset=UTF-8\n6 > Host: automationintesting.online\n6 > Connection: Keep-Alive\n6 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/11.0.2)\n6 > Accept-Encoding: gzip,deflate\n{\"bookingdates\":{\"checkin\":\"2022-10-27\",\"checkout\":\"2022-10-28\"},\"depositpaid\":true,\"firstname\":\"joaquin\",\"lastname\":\"mateos\",\"roomid\":1,\"totalprice\":0}\n\n14:54:05.262 request:\n7 > POST https:\/\/automationintesting.online\/booking\n7 > Cookie: token=9Gy1kJmecG0QQVkb\n7 > Content-Type: application\/json; charset=UTF-8\n7 > Host: automationintesting.online\n7 > Connection: Keep-Alive\n7 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/11.0.2)\n7 > Accept-Encoding: gzip,deflate\n{\"bookingdates\":{\"checkin\":\"2022-10-27\",\"checkout\":\"2022-10-28\"},\"depositpaid\":true,\"firstname\":\"joaquin\",\"lastname\":\"mateos\",\"roomid\":1,\"totalprice\":0}\n\n14:54:05.537 response time in milliseconds: 274\n7 < 200\n7 < Date: Sat, 15 Oct 2022 17:54:07 GMT\n7 < Content-Type: application\/json\n7 < Transfer-Encoding: chunked\n7 < Connection: keep-alive\n7 < CF-Cache-Status: DYNAMIC\n7 < Report-To: {\"endpoints\":[{\"url\":\"https:\\\/\\\/a.nel.cloudflare.com\\\/report\\\/v3?s=DGGp3YTJosNl4KmUNuJ8RlUW2V5zAjlvzXO0YwImJuDxffyIudJH7klq6GiAmktgagagLj6DsDBClxiWCkOQtb9mDGaxbD3OUdrags%2BaFw88e30KnaKo5%2BolZ0jO2FXWBbNQdje9fbVYdQzRZQ%3D%3D\"}],\"group\":\"cf-nel\",\"max_age\":604800}\n7 < NEL: {\"success_fraction\":0,\"report_to\":\"cf-nel\",\"max_age\":604800}\n7 < Server: cloudflare\n7 < CF-RAY: 75aa6b0d081e8d94-MIA\n7 < alt-svc: h3=\":443\"; ma=86400, h3-29=\":443\"; ma=86400\n{\"bookings\":[{\"bookingid\":1,\"roomid\":1,\"firstname\":\"James\",\"lastname\":\"Dean\",\"depositpaid\":true,\"bookingdates\":{\"checkin\":\"2022-02-01\",\"checkout\":\"2022-02-05\"}}]}\n\n"},{"result":{"nanos":127900,"errorMessage":"status code was: 200, expected: 201, response time in milliseconds: 274, url: https:\/\/automationintesting.online\/booking, response: \n{\"bookings\":[{\"bookingid\":1,\"roomid\":1,\"firstname\":\"James\",\"lastname\":\"Dean\",\"depositpaid\":true,\"bookingdates\":{\"checkin\":\"2022-02-01\",\"checkout\":\"2022-02-05\"}}]}\nclasspath:homework07\/postRequest.feature:27","millis":0.1279,"status":"failed"},"step":{"line":27,"prefix":"Then","index":12,"text":"status 201"},"stepLog":"14:54:05.538 classpath:homework07\/postRequest.feature:27\nThen status 201\nstatus code was: 200, expected: 201, response time in milliseconds: 274, url: https:\/\/automationintesting.online\/booking, response: \n{\"bookings\":[{\"bookingid\":1,\"roomid\":1,\"firstname\":\"James\",\"lastname\":\"Dean\",\"depositpaid\":true,\"bookingdates\":{\"checkin\":\"2022-02-01\",\"checkout\":\"2022-02-05\"}}]}\nclasspath:homework07\/postRequest.feature:27\n"},{"result":{"nanos":0,"millis":0.0,"status":"skipped"},"step":{"line":28,"prefix":"And","index":13,"text":"print response"}}],"line":7,"description":"","durationMillis":4973.5189,"failed":true,"error":"status code was: 200, expected: 201, response time in milliseconds: 274, url: https:\/\/automationintesting.online\/booking, response: \n{\"bookings\":[{\"bookingid\":1,\"roomid\":1,\"firstname\":\"James\",\"lastname\":\"Dean\",\"depositpaid\":true,\"bookingdates\":{\"checkin\":\"2022-02-01\",\"checkout\":\"2022-02-05\"}}]}\nclasspath:homework07\/postRequest.feature:27","executorName":"main","name":"get token from 'auth\/login\/' endpoint.","startTime":1665856439743,"refId":"[1:7]","endTime":1665856445538,"exampleIndex":-1}],"callDepth":0,"name":"post request to booking endpoint","description":"","resultDate":"2022-10-15 02:54:05 p. m.","durationMillis":4973.5189,"passedCount":0}